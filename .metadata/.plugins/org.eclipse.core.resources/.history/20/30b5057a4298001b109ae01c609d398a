package com.trifulcas.ejercicio01;

import java.time.DayOfWeek;
import java.time.LocalDate;
import java.util.Arrays;

public class CitasMedico {
	private LocalDate[] fechas;

	public CitasMedico() {
		// LLamo al constructor con parámetro fecha con la fecha de hoy
		this(LocalDate.now());
	}

	public CitasMedico(String fecha) {
		//Parseo la fecha y llamo al constructor con parámetro fecha
		int p=5;
		this(LocalDate.parse(fecha));
	}

	public CitasMedico(LocalDate fecha) {
		// Crearé el array con un tamaño de 12
		// Voy a ir añadiendo las fechas sumando 15 días
		// Hay que comprobar que no sea fin de semana
		fechas=new LocalDate[12];
		fechas[0]=siguienteLaborable(fecha);
		for(int i=1;i<fechas.length;i++) {
			fechas[i] = siguienteLaborable(fechas[i - 1].plusDays(15));
		}
	}
	
	/**
	 * Busca el siguiente día laborable. Si la fecha es sábado o domingo pasa al lunes
	 * @param fecha La fecha a comprobar
	 * @return El siguiente día laborable a la fecha
	 */
	private LocalDate siguienteLaborable(LocalDate fecha) {
		
		// Si es sábado pasamos al lunes sumando dos días
		if (fecha.getDayOfWeek()==DayOfWeek.SATURDAY) {
			fecha=fecha.plusDays(2);
		}
		// Si es domingo pasamos al lunes sumando 1 día
		if (fecha.getDayOfWeek()==DayOfWeek.SUNDAY) {
			fecha=fecha.plusDays(1);
		}
		return fecha;
	}
	public LocalDate proximaCita() {
		//Devolveremos la próxima cita a partir de hoy
		return null;
	}
	public String toString() {
		return Arrays.toString(fechas);
	}
}
